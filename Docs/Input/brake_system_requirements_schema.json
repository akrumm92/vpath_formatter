{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/brake-system-requirements.schema.json",
  "title": "Brake System Requirements Structured Document Schema",
  "description": "Schema for structured brake system requirements with hierarchical chapters and work items",
  "type": "object",
  "required": ["document"],
  "properties": {
    "document": {
      "type": "object",
      "description": "The main document container",
      "required": ["id", "title", "project", "space", "type", "version", "created", "chapters"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the document in Polarion",
          "pattern": "^[A-Za-z]+/.+",
          "examples": ["Python/_default/Functional Concept - Brake System"]
        },
        "title": {
          "type": "string",
          "description": "Document title",
          "minLength": 1
        },
        "project": {
          "type": "string",
          "description": "Project identifier",
          "minLength": 1,
          "examples": ["Python"]
        },
        "space": {
          "type": "string",
          "description": "Document space in Polarion",
          "minLength": 1,
          "examples": ["_default", "Functional Layer", "System Layer"]
        },
        "type": {
          "type": "string",
          "description": "Document type",
          "examples": ["Functional Concept", "Technical Specification", "Test Plan"]
        },
        "version": {
          "type": "string",
          "description": "Document version",
          "pattern": "^\\d+\\.\\d+(\\.\\d+)?$",
          "examples": ["1.0", "2.1.3"]
        },
        "created": {
          "type": "string",
          "description": "Creation date in ISO format",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "examples": ["2025-08-14"]
        },
        "chapters": {
          "type": "array",
          "description": "Top-level chapters of the document",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/chapter"
          }
        }
      }
    }
  },
  "definitions": {
    "chapter": {
      "type": "object",
      "description": "A chapter or section in the document",
      "required": ["heading", "heading_id"],
      "properties": {
        "heading": {
          "type": "string",
          "description": "Chapter heading text",
          "minLength": 1,
          "examples": ["Introduction", "Functional Architecture", "Use Cases of the Function"]
        },
        "heading_id": {
          "type": "string",
          "description": "Polarion work item ID for this heading",
          "pattern": "^[A-Za-z]+/[A-Z]+-\\d+$",
          "examples": ["Python/FCTS-9184", "Python/FCTS-9198"]
        },
        "outlineNumber": {
          "type": "string",
          "description": "Hierarchical outline number",
          "pattern": "^\\d+(\\.\\d+)*$",
          "examples": ["1", "2.1", "3.4.2"]
        },
        "description": {
          "type": "string",
          "description": "Optional description of the chapter content"
        },
        "workitems": {
          "type": "array",
          "description": "Work items directly under this chapter",
          "items": {
            "$ref": "#/definitions/workitem"
          }
        },
        "subchapters": {
          "type": "array",
          "description": "Subchapters nested under this chapter",
          "items": {
            "$ref": "#/definitions/subchapter"
          }
        }
      }
    },
    "subchapter": {
      "type": "object",
      "description": "A subchapter nested within a chapter",
      "required": ["heading", "heading_id"],
      "properties": {
        "heading": {
          "type": "string",
          "description": "Subchapter heading text",
          "minLength": 1,
          "examples": ["Summary of the Function", "Context & External Interfaces of the Function"]
        },
        "heading_id": {
          "type": "string",
          "description": "Polarion work item ID for this subchapter heading",
          "pattern": "^[A-Za-z]+/[A-Z]+-\\d+$",
          "examples": ["Python/FCTS-9189", "Python/FCTS-9199"]
        },
        "outlineNumber": {
          "type": "string",
          "description": "Hierarchical outline number",
          "pattern": "^\\d+(\\.\\d+)*$",
          "examples": ["1.1", "2.1", "3.4"]
        },
        "description": {
          "type": "string",
          "description": "Optional description of the subchapter content"
        },
        "workitems": {
          "type": "array",
          "description": "Work items under this subchapter",
          "items": {
            "$ref": "#/definitions/workitem"
          }
        }
      }
    },
    "workitem": {
      "type": "object",
      "description": "A requirement work item",
      "required": ["id", "title", "description", "category", "priority"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique requirement identifier",
          "pattern": "^BR-[A-Z]+-\\d{3}$",
          "examples": ["BR-FUN-001", "BR-SAF-002", "BR-TEST-003"]
        },
        "title": {
          "type": "string",
          "description": "Short title of the requirement",
          "minLength": 1,
          "maxLength": 100,
          "examples": ["Primary Brake Activation", "ABS Activation"]
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the requirement",
          "minLength": 1,
          "examples": ["The brake system shall activate within 100ms when the brake pedal is pressed with a force greater than 20N"]
        },
        "category": {
          "type": "string",
          "description": "Requirement category",
          "enum": [
            "Functional",
            "Performance", 
            "Safety",
            "Interface",
            "Environmental",
            "Maintenance",
            "Regulatory",
            "Testing"
          ]
        },
        "priority": {
          "type": "string",
          "description": "Requirement priority level",
          "enum": ["Critical", "High", "Medium", "Low"]
        },
        "verification_method": {
          "type": "string",
          "description": "Optional method for verifying the requirement",
          "enum": ["Test", "Analysis", "Inspection", "Demonstration"]
        },
        "acceptance_criteria": {
          "type": "string",
          "description": "Optional specific criteria for requirement acceptance"
        },
        "rationale": {
          "type": "string",
          "description": "Optional rationale for the requirement"
        },
        "dependencies": {
          "type": "array",
          "description": "Optional list of requirement IDs this requirement depends on",
          "items": {
            "type": "string",
            "pattern": "^BR-[A-Z]+-\\d{3}$"
          }
        },
        "tags": {
          "type": "array",
          "description": "Optional tags for categorization",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "examples": [
    {
      "document": {
        "id": "Python/_default/Functional Concept - Brake System",
        "title": "Functional Concept - Brake System",
        "project": "Python",
        "space": "_default",
        "type": "Functional Concept",
        "version": "1.0",
        "created": "2025-08-14",
        "chapters": [
          {
            "heading": "Introduction",
            "heading_id": "Python/FCTS-9184",
            "outlineNumber": "1",
            "description": "Introduction to the brake system functional concept",
            "subchapters": [
              {
                "heading": "Summary of the Function",
                "heading_id": "Python/FCTS-9189",
                "outlineNumber": "1.3",
                "workitems": [
                  {
                    "id": "BR-FUN-001",
                    "title": "Primary Brake Activation",
                    "description": "The brake system shall activate within 100ms when the brake pedal is pressed with a force greater than 20N",
                    "category": "Functional",
                    "priority": "High"
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  ]
}